â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  INSTRUCCIONES PARA CORREGIR ERROR 500 AL CREAR CURSOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ PROBLEMA DETECTADO:
   Error 500 (Internal Server Error) al intentar crear cursos
   
ğŸ” CAUSA:
   Faltan columnas en la base de datos para almacenar:
   - Datos de clases en lÃ­nea (clase_en_linea, fecha_inicio, fecha_fin)
   - Datos de quizzes (contenido_json)

âœ… SOLUCIÃ“N:
   Ejecutar las migraciones pendientes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PASOS PARA EJECUTAR:

1. ABRE LA TERMINAL/CMD
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - Presiona: Windows + R
   - Escribe: cmd
   - Presiona Enter

2. NAVEGA AL DIRECTORIO DEL PROYECTO
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Ejecuta:
   
   cd c:\xampp\htdocs\SHC

3. EJECUTA LAS MIGRACIONES
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Ejecuta:
   
   php artisan migrate

4. VERIFICA QUE SE EJECUTARON CORRECTAMENTE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   DeberÃ­as ver:
   
   âœ“ 2025_10_31_000001_add_clase_en_linea_to_curso_materiales
   âœ“ 2025_10_31_000002_add_contenido_json_to_curso_actividades
   
   Migration successful!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š CAMBIOS EN LA BASE DE DATOS:

Tabla: curso_materiales
   âœ… Nueva columna: fecha_inicio (datetime)
   âœ… Nueva columna: fecha_fin (datetime)
   âœ… Nuevo tipo: 'clase_en_linea' agregado al enum 'tipo'

Tabla: curso_actividades
   âœ… Nueva columna: contenido_json (json)
      â†’ Almacena preguntas, respuestas y configuraciÃ³n de quizzes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ ARCHIVOS ACTUALIZADOS:

Controlador:
   âœ… app/Http/Controllers/CursoController.php
      - processMaterials: Maneja meetUrl, meetStart, meetEnd
      - processActivities: Maneja quizData

Modelos:
   âœ… app/Models/CursoMaterial.php
      - fillable: fecha_inicio, fecha_fin
      - casts: fecha_inicio, fecha_fin como datetime
      - Soporte para tipo 'clase_en_linea'
   
   âœ… app/Models/CursoActividad.php
      - fillable: contenido_json
      - casts: contenido_json como array

Migraciones:
   âœ… 2025_10_31_000001_add_clase_en_linea_to_curso_materiales.php
   âœ… 2025_10_31_000002_add_contenido_json_to_curso_actividades.php

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ SI HAY ERRORES:

Error: "Nothing to migrate"
   â†’ Las migraciones ya estÃ¡n ejecutadas
   â†’ El problema puede ser otro

Error: "Table already exists"
   â†’ Las tablas ya existen
   â†’ Ejecuta: php artisan migrate:status

Error: "Syntax error"
   â†’ Verifica que MySQL estÃ© corriendo en XAMPP
   â†’ Verifica las credenciales en .env

Error: "Connection refused"
   â†’ Inicia MySQL en XAMPP Control Panel
   â†’ Verifica que el puerto 3306 estÃ© libre

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª PROBAR LA SOLUCIÃ“N:

1. Ejecuta las migraciones (arriba)

2. Ve a: http://127.0.0.1:8000/capacitaciones/cursos/create

3. Crea un curso de prueba:
   âœ… Agrega materiales (video, documento, clase en lÃ­nea)
   âœ… Agrega un quiz con preguntas
   âœ… Click en "Crear Curso"

4. SI FUNCIONA:
   â†’ VerÃ¡s: "Â¡Curso creado exitosamente!"
   â†’ El curso aparecerÃ¡ en la lista
   â†’ Error 500 resuelto âœ“

5. SI PERSISTE EL ERROR:
   â†’ Abre: storage/logs/laravel.log
   â†’ Busca el error mÃ¡s reciente
   â†’ Copia el mensaje de error completo
   â†’ CompÃ¡rtelo para mÃ¡s ayuda

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ VERIFICACIÃ“N RÃPIDA:

Para verificar que las columnas se agregaron correctamente:

1. Abre phpMyAdmin: http://localhost/phpmyadmin

2. Selecciona tu base de datos

3. Tabla curso_materiales:
   âœ“ Debe tener: fecha_inicio (datetime)
   âœ“ Debe tener: fecha_fin (datetime)
   âœ“ Columna 'tipo' debe incluir: 'clase_en_linea'

4. Tabla curso_actividades:
   âœ“ Debe tener: contenido_json (json/text)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± ACCESO DE ESTUDIANTES:

Una vez creado el curso, los estudiantes podrÃ¡n verlo en:
http://127.0.0.1:8000/academico/cursos-disponibles

Requisitos para que aparezca:
âœ… Curso debe estar en estado: 'activo'
âœ… Fecha de inicio debe ser <= hoy (o null)
âœ… Debe tener cupos disponibles (max_estudiantes)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ RESUMEN:

ANTES:
âŒ Error 500 al crear cursos
âŒ Faltan columnas en BD
âŒ No se pueden guardar clases en lÃ­nea
âŒ No se pueden guardar quizzes

DESPUÃ‰S (tras ejecutar migraciones):
âœ… Cursos se crean correctamente
âœ… Clases en lÃ­nea funcionan
âœ… Quizzes con preguntas se guardan
âœ… Estudiantes pueden ver cursos disponibles

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMANDO RÃPIDO (copia y pega en CMD):

cd c:\xampp\htdocs\SHC && php artisan migrate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
